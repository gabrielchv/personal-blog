<div class="space-y-6">
    <div class="p-4 rounded-lg border {% if total_success == total_files and total_success > 0 %}bg-green-50 text-green-800 border-green-200{% else %}bg-yellow-50 text-yellow-800 border-yellow-200{% endif %} shadow-md">
        <p class="font-bold text-lg">
            Optimization Batch Complete: <span class="text-xl font-extrabold">{{ total_success }}</span> of <span class="text-xl font-extrabold">{{ total_files }}</span> files succeeded.
        </p>
        <button onclick="window.location.reload()" class="mt-2 text-sm underline opacity-80 hover:opacity-100">
            Start a New Batch
        </button>
    </div>

    <div class="shadow overflow-x-auto border-b border-gray-200 sm:rounded-lg">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Original File</th>
                    <th scope="col" class="px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Output File</th>
                    <th scope="col" class="px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Download</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for r in results %}
                <tr class="{% if r.status == 'success' %}{% else %}bg-red-50{% endif %} border-b border-gray-100 hover:bg-gray-100 transition duration-100">
                    <td class="p-3 text-sm font-medium text-gray-900">{{ r.filename }}</td>
                    <td class="p-3 text-sm whitespace-nowrap text-center">{% if r.status == 'success' %}✅{% else %}❌{% endif %}</td>
                    <td class="p-3 text-sm">{% if r.status == 'success' %}<span class="font-mono text-sm bg-gray-100 px-2 py-0.5 rounded">{{ r.output_name }} ({{ r.file_type }} - {{ r.time }})</span>{% else %}<span class="text-red-600 font-medium text-sm">{{ r.message.split('Detail:')[0].strip() }}</span>{% endif %}</td>
                    <td class="p-3 text-sm text-right">{% if r.status == 'success' %}<a href="{{ r.download_url }}" download class="text-indigo-600 hover:text-indigo-800 font-medium text-sm">Download</a>{% else %}Failed{% endif %}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div> 